#!/usr/bin/env bash
# vim: filetype=bash

{{ if eq .chezmoi.os "linux" -}}
set -euo pipefail

# Pretty print functions
info()    { echo -e "\033[1;34m[INFO]\033[0m $*"; }
warn()    { echo -e "\033[1;33m[WARN]\033[0m $*"; }
error()   { echo -e "\033[1;31m[ERROR]\033[0m $*"; }
success() { echo -e "\033[1;32mâœ… $*\033[0m"; }


info "Installing Ollama models"

if type -P ollama >/dev/null 2>&1; then
  info "Installing Ollama models"
  {{ range .models.ollama }} 
	  info "Ollama pulling {{ . }}" 
	  ollama pull {{.}}
	  success "Ollama pulled {{ . }}" 
  {{ end }}

  info "Installing Ollama Custom models"
  {{ range .models.custom }} 
	  info "Ollama create {{ . }}" 
	  ollama create {{.}} -f ~/.ollama/Modelfiles/{{.}}.Modelfile || true
	  success "Ollama created {{ . }}" 
  {{ end }}

fi

success "Installed Ollama models"

{{ end -}}

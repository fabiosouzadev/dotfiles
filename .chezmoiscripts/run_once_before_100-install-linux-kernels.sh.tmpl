#!/usr/bin/env bash
# vim: filetype=bash

{{ if .kernels.install }}
set -euo pipefail

# Pretty print functions
info()    { echo -e "\033[1;34m[INFO]\033[0m $*"; }
warn()    { echo -e "\033[1;33m[WARN]\033[0m $*"; }
error()   { echo -e "\033[1;31m[ERROR]\033[0m $*"; }
success() { echo -e "\033[1;32mâœ… $*\033[0m"; }

{{ if eq .chezmoi.osRelease.id "endeavouros" }}


info "Installing Arch Kernels"

sudo pacman -S --noconfirm --needed {{ range .linux.arch.kernels }} {{.}}{{end}}


success "Installed Arch Kernels"

{{ else }}

#CachyOS	
{{ if eq .chezmoi.osRelease.id "cachyos" }}
info "Installing CachyOs Kernels"

sudo pacman -S --noconfirm --needed {{ range .linux.cachyos.kernels }} {{.}}{{end}}


success "Installed CachyOs Kernels"
{{ else }}
{{ if eq .chezmoi.osRelease.id "ubuntu" }}
sudo add-apt-repository -y ppa:damentz/liquorix
sudo apt update -y
sudo apt install -y \
    linux-image-liquorix-amd64 \
    linux-headers-liquorix-amd64
success "Installed Liquorix Kernel on Ubuntu"
{{ end }}


{{ end }}
{{ end }}
{{ end }}

#!/usr/bin/env bash
# vim: filetype=bash
{{ if eq .chezmoi.os "linux" -}}
set -euo pipefail

# Pretty print functions
info()    { echo -e "\033[1;34m[INFO]\033[0m $*"; }
warn()    { echo -e "\033[1;33m[WARN]\033[0m $*"; }
error()   { echo -e "\033[1;31m[ERROR]\033[0m $*"; }
success() { echo -e "\033[1;32mâœ… $*\033[0m"; }

{{ if eq .chezmoi.osRelease.idLike "ubuntu" }}
sudo apt update
info "Installing Zsh..."
sudo apt install -y zsh
info "Setting Zsh as the default shell..."
chsh -s /usr/bin/zsh
success "Zsh installed."
{{ end }}


{{ if eq .chezmoi.osRelease.idLike "arch" }}
info "Installing Zsh..."
sudo pacman -Syu --noconfirm --needed zsh
info "Setting Zsh as the default shell..."
chsh -s /usr/bin/zsh
success "Zsh installed."
# source ~/.zshrc
{{ end }}


# Configure keyboard
[ ! -d /etc/X11/xorg.conf.d ] && sudo mkdir -p /etc/X11/xorg.conf.d/
sudo cp "{{ .chezmoi.sourceDir }}/private_dot_config/xorg.conf.d/20-keyboard.conf" /etc/X11/xorg.conf.d/

# Install starship
curl -sS https://starship.rs/install.sh | sh

PERSONAL_DIR="$HOME/Projects/Personal"
WORK_DIR="$HOME/Projects/Work/Instivo"

[ ! -d $PERSONAL_DIR ] || mkdir -p $PERSONAL_DIR
[ ! -d $WORK_DIR ] || mkdir -p $WORK_DIR

{{ end -}}
